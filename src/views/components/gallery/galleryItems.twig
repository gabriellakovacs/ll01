{% set prevWasHalf = false %}


{% for item in gallery %}

    {% if item.whiteCursor %}
        {% set backgroundShade = 'dark' %}
        {% else %}
        {% set backgroundShade = 'light' %}
    {% endif %}


    {# FULL ITEMS #}
    {% if item.type == "fullImage" %}

        {% set backgroundImg = 'background-image: url(' ~ item.fullImage.first().url ~ ');'  %}

        <div
            class="gallery-item gallery-item--full js-galleryItem js-galleryItem--full {{ classIndicatingBackground }}"
            data-type="full{{ backgroundShade|capitalize }}"
        >
          <div class="gallery-image js-galleryImage" style = "{{ backgroundImg }}"></div>
        </div>

        {% set prevWasHalf = false %}

    {# HALF ITEMS #}
    {% else %}

        {% if prevWasHalf %}
            {% set side = 'right' %}
            {% set prevWasHalf = false %}
            {% else %}
            {% set side = 'left' %}
            {% set prevWasHalf = true %}
        {% endif %}

        {% if item.type == "halfImage" %}

            {% set backgroundImg = 'background-image: url(' ~ item.halfImage.first().url ~ ');'  %}

            <div
                class="gallery-item gallery-item--half gallery-item--half--{{ side }} js-galleryItem {{ classIndicatingBackground }}"
                data-type="half{{ side|capitalize }}{{ backgroundShade|capitalize }}"
            >
              <div class="gallery-image js-galleryImage" style = "{{ backgroundImg }}"></div>
            </div>

        {% elseif item.type == "text" %}

            <div
                class="gallery-item gallery-item--half gallery-item--half--{{ side }} js-galleryItem js-galleryItem--half"
                data-type="half{{ side|capitalize }}{{ backgroundShade|capitalize }}"
            >
              <p class="gallery-text gallery-text--{{ backgroundShade }}">{{ item.text }}</p>
            </div>

        {% endif %}

    {% endif %}

{% endfor %}
